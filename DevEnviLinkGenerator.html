<html>
  <title>Dev Environment Link Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <body onload="generateDropDownBank()">
    <table>
      <tbody>
        <tr>
          <h6>INR BANKS</h6>
          <div class="row">
            <div class="col-md-2" id="inrBankCode">
            </div>
            <div class="col-md-2">
              <label>Amount</label>
              <input placeholder="Amount" value="10" id="inrAmount">
            </div>
            <div class="col-md-2" id="inrPayeeCode">
            </div>
            <div class="col-md-3">
              <label>Reference Number
                <input placeholder="Reference Number" id="inrPaymentRef">
              </label>
            </div>
            <div class="col-md-2">
              <button onclick="getbankCode('inrBankCode','inrPayeeCode', 'INR', 'inrAmount', 'inrPaymentRef', 'inrlink')" type="button" class="btn btn-primary">
                <a target="_blank" id='inrlink'>Generate Link</a>
              </button>
            </div>
          </div>
        </tr>
        <tr>
          <h6>MYR BANKS</h6>
          <div class="row">
            <div class="col-md-2" id="myrBankCode">
            </div>
            <div class="col-md-2">
              <label>Amount</label>
              <input placeholder="Amount" value="50" id="myrAmount">
            </div>
            <div class="col-md-2" id="myrPayeeCode">
            </div>
            <div class="col-md-3">
              <label>Reference Number
                <input placeholder="Reference Number" id="myrPaymentRef">
              </label>
            </div>
            <div class="col-md-2">
              <button onclick="getbankCode('myrBankCode','myrPayeeCode', 'MYR', 'myrAmount', 'myrPaymentRef', 'myrlink')" type="button" class="btn btn-primary">
                <a target="_blank" id='myrlink'>Generate Link</a>
              </button>
            </div>
          </div>
        </tr>
        <tr>
          <h6>THB BANKS</h6>
          <div class="row">
            <div class="col-md-2" id="thbBankCode">
            </div>
            <div class="col-md-2">
              <label>Amount</label>
              <input placeholder="Amount" value="50" id="thbAmount">
            </div>
            <div class="col-md-2" id="thbPayeeCode">
            </div>
            <div class="col-md-3">
              <label>Reference Number
                <input placeholder="Reference Number" id="thbPaymentRef">
              </label>
            </div>
            <div class="col-md-2">
              <button onclick="getbankCode('thbBankCode','thbPayeeCode', 'THB', 'thbAmount', 'thbPaymentRef', 'thblink')" type="button" class="btn btn-primary">
                <a target="_blank" id='thblink'>Generate Link</a>
              </button>
            </div>
          </div>
        </tr>
        <tr>
          <h6>VND BANKS</h6>
          <div class="row">
            <div class="col-md-2" id="vndBankCode">
            </div>
            <div class="col-md-2">
              <label>Amount</label>
              <input placeholder="Amount" value="100000" id="vndAmount">
            </div>
            <div class="col-md-2" id="vndPayeeCode">
            </div>
            <div class="col-md-3">
              <label>Reference Number
                <input placeholder="Reference Number" id="vndPaymentRef">
              </label>
            </div>
            <div class="col-md-2">
              <button onclick="getbankCode('vndBankCode','vndPayeeCode', 'VND', 'vndAmount', 'vndPaymentRef', 'vndlink')" type="button" class="btn btn-primary">
                <a target="_blank" id='vndlink'>Generate Link</a>
              </button>
            </div>
          </div>
        </tr>
        <tr>
          <a target="_blank" href="https://docs.google.com/document/d/15S3gn0Azby6m-7r6a29j_JMtb988qG7S/">Visit this link for more info about link generation.</a>
        </tr>
      </tbody>
    </table>
    <br>
  </body>
  <script>
    function generateDropDownBank(){
    //INR Bank
    var inrBanks = ["axis","sbi","icici","idbi","kotbk","pnjb","hdfc"]
    var inrPayee = ["TEST01", "HDFC01", "KOTAK01"]
    generateDropDown(inrBanks, "INRBanks", "inrBankCode", "Choose Bank: ")
    generateDropDown(inrPayee, "INRPayee", "inrPayeeCode", "Choose Payee: ")
    
    //MYR Bank
    var myrBanks = ['my_amb', "my_public", "my_rhb", "my_cimb", "my_hsbc", "my_uobib", "my_mayb", "my_ocbc"]
    var myrPayee = ["MALTEST1", "MALTEST2", "MALTEST3"]
    generateDropDown(myrBanks, "MYRBanks", "myrBankCode", "Choose Bank: ")
    generateDropDown(myrPayee, "MYRPayee", "myrPayeeCode", "Choose Payee: ")
    
    //THB Bank
    var thbBanks = ["th_krungsri", "th_ttbdirect", "th_kasikorn", "th_siam", "th_krungthai", "th_uobt", "th_bangkok", "th_ttbdirect", "th_ttbdirect", "th_governmentsavings"]
    var thbPayee = ["TEST_BANGKOK", "TEST_TTB", "TEST_GSB"]
    generateDropDown(thbBanks, "THBBanks", "thbBankCode", "Choose Bank: ")
    generateDropDown(thbPayee, "THBPayee", "thbPayeeCode", "Choose Payee: ")

    //VND Bank
    var vndBanks = ["vn_acb", "vn_sacom", "vn_vietcom", "vn_techcom", "vn_vietin", "vn_donga", "vn_bidv", "vn_tp", "vn_vp", "vn_exim"]
    var vndPayee = ["TEST_VIET_SACOM", "TEST_VIET_ACB", "TEST_VIET_VIETCOM", "TEST_VIET_TECHCOM", "TEST_VIET_DONG"]
    generateDropDown(vndBanks, "VNDBanks", "vndBankCode", "Choose Bank: ")
    generateDropDown(vndPayee, "VNDPayee", "vndPayeeCode", "Choose Payee: ")
    }
    function generateDropDown(Val, Type, Id, Text){
      var values = Val;
      var select = document.createElement("select");
      select.name = Type;
      select.id = Type;
      
      for (const val of values){
        var option = document.createElement("option");
        option.value = val;
        option.text = val.charAt(0) + val.slice(1);
        select.appendChild(option);
      }
      var label = document.createElement("label")
      label.innerHTML = Text
      label.htmlFor = Id;
      document.getElementById(Id).appendChild(label).appendChild(select);
    }
    function getbankCode(Id, Payee, Currency, Amount, PayRef, bankLink) {
      var bankCode = document.querySelector(`div#${Id} select`).value
      var amount = document.getElementById(Amount).value
      var accNum = document.querySelector(`div#${Payee} select`).value
      var paymentRef = document.getElementById(PayRef).value
      linkToGo = "https://puppeteer.dev.carpentum.tech/start/"+bankCode+"?amount="+amount+"&merchantCode=mc&currency="+Currency+"&accountNumber="+accNum+"&returnUrl=https://www.google.com&signature=xx&expiryTime=2022-11-22T23:00:00.000Z&payOrderId=ECLP:"+paymentRef+"&paymentReference="+paymentRef

      var link = document.getElementById(bankLink)
      link.setAttribute('href', linkToGo)
      link.click()
    }
    banks = ["my_mayb","my_amb","my_public","my_acb"]
    function createDrop(bankList){
      var dropdown = document.getElementById(bankList);
      var opt = document.createElement("option"); 
      opt.text = 'something';
      opt.value = 'somethings value';
      dropdown.options.add(opt);
    }
  </script>
</html>